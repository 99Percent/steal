module("<%= underscore %>")

test("<%= underscore %> scaffold test", function(){

        S.open("<%= appName %>.html");
		S.wait(10, function(){
			ok(true, "things working");
		})

})

test("<%= plural %> present", function(){
    S('.<%= underscore %>').exists(function(){
		ok(true, "<%= plural %> present");
    });
})

test("create <%= plural %>", function(){
    S("form input[name=name]").type("Ice")
    S("form input[name=description]").type("Cold Water")
    S("form input[type=submit]").click()
    S('.<%= underscore %>:nth-child(2)').exists()
    S('.<%= underscore %>:nth-child(2) td:first').text(function(text){
        ok(text.match(/Ice/), "Typed Ice");
    });
})

test("edit <%= plural %>", function(){
    S('.<%= underscore %>:nth-child(2) a.edit').click();
    S(".<%= underscore %> input[name=name]").type(" Water")
    S(".<%= underscore %> input[name=description]").type("\b\b\b\b\bTap Water")
    S(".update").click()
    S('.<%= underscore %>:nth-child(2) .edit').exists()
    S('.<%= underscore %>:nth-child(2) td:first').text(function(text){
        ok(text.match(/Ice Water/), "Typed Ice Water");
    });
    S('.<%= underscore %>:nth-child(2) td:nth-child(2)').text(function(text){
        ok(text.match(/Cold Tap Water/), "Typed Ice Water");
    });
})


test("destroy", function(){
    S(".<%= underscore %>:nth-child(2) .destroy").click()
    S('.<%= underscore %>:nth-child(2)').missing()
    ok("destroyed");
});